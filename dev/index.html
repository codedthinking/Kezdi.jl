<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · Kezdi.jl</title><meta name="title" content="Home · Kezdi.jl"/><meta property="og:title" content="Home · Kezdi.jl"/><meta property="twitter:title" content="Home · Kezdi.jl"/><meta name="description" content="Documentation for Kezdi.jl."/><meta property="og:description" content="Documentation for Kezdi.jl."/><meta property="twitter:description" content="Documentation for Kezdi.jl."/><meta property="og:url" content="https://codedthinking.github.io/Kezdi.jl/"/><meta property="twitter:url" content="https://codedthinking.github.io/Kezdi.jl/"/><link rel="canonical" href="https://codedthinking.github.io/Kezdi.jl/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href><img src="assets/logo.svg" alt="Kezdi.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href>Kezdi.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Getting-started"><span>Getting started</span></a></li><li><a class="tocitem" href="#Benefits-of-using-Kezdi.jl"><span>Benefits of using Kezdi.jl</span></a></li><li><a class="tocitem" href="#Commands"><span>Commands</span></a></li><li><a class="tocitem" href="#Differences-to-standard-Julia-and-DataFrames-syntax"><span>Differences to standard Julia and DataFrames syntax</span></a></li><li><a class="tocitem" href="#Differences-to-Stata-syntax"><span>Differences to Stata syntax</span></a></li><li><a class="tocitem" href="#Convenience-functions"><span>Convenience functions</span></a></li><li><a class="tocitem" href="#Acknowledgements"><span>Acknowledgements</span></a></li></ul></li><li><a class="tocitem" href="reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/codedthinking/Kezdi.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/codedthinking/Kezdi.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Kezdi.jl-Documentation"><a class="docs-heading-anchor" href="#Kezdi.jl-Documentation">Kezdi.jl Documentation</a><a id="Kezdi.jl-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Kezdi.jl-Documentation" title="Permalink"></a></h1><p>Kezdi.jl is a Julia package that provides a Stata-like interface for data manipulation and analysis. It is designed to be easy to use for Stata users who are transitioning to Julia.<sup class="footnote-reference"><a id="citeref-stata" href="#footnote-stata">[stata]</a></sup> </p><p>It imports and reexports CSV, DataFrames, FixedEffectModels, FreqTables, ReadStatTables, Statistics, and StatsBase. </p><h2 id="Getting-started"><a class="docs-heading-anchor" href="#Getting-started">Getting started</a><a id="Getting-started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-started" title="Permalink"></a></h2><h3 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h3><p><code>Kezdi.jl</code> is currently in beta. To install the package, run the following command in Julia&#39;s REPL:</p><pre><code class="language-julia hljs">using Pkg; Pkg.add(url=&quot;https://github.com/codedthinking/Kezdi.jl&quot;)</code></pre><p>Every Kezdi.jl command is a macro that begins with <code>@</code>. These commands operate on a global <code>DataFrame</code> that is set using the <code>setdf</code> function. Alternatively, commands can be executed within a <code>@with</code> block that sets the <code>DataFrame</code> for the duration of the block.</p><h3 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h3><pre><code class="language-julia hljs">using Kezdi
using RDatasets

setdf(dataset(&quot;datasets&quot;, &quot;mtcars&quot;))

@rename HP Horsepower
@rename Disp Displacement
@rename WT Weight
@rename Cyl Cylinders

@tabulate Gear
@keep @if Gear == 4
@keep MPG Horsepower Weight Displacement Cylinders
@summarize MPG
@regress log(MPG) log(Horsepower) log(Weight) log(Displacement) fe(Cylinders), robust </code></pre><p>Alternatively, you can use the <code>@with</code> block to avoid writing to a global <code>DataFrame</code>:</p><pre><code class="language-julia hljs">using Kezdi
using RDatasets

df = dataset(&quot;datasets&quot;, &quot;mtcars&quot;)

renamed_df = @with df begin
    @rename HP Horsepower
    @rename Disp Displacement
    @rename WT Weight
    @rename Cyl Cylinders
end

@with renamed_df begin
    @tabulate Gear
    @keep @if Gear == 4
    @keep MPG Horsepower Weight Displacement Cylinders
    @summarize MPG
    @regress log(MPG) log(Horsepower) log(Weight) log(Displacement) fe(Cylinders), robust 
end</code></pre><p>&lt;script async data-uid=&quot;62d7ebb237&quot; src=&quot;https://relentless-producer-1210.ck.page/62d7ebb237/index.js&quot;&gt;&lt;/script&gt;</p><h2 id="Benefits-of-using-Kezdi.jl"><a class="docs-heading-anchor" href="#Benefits-of-using-Kezdi.jl">Benefits of using Kezdi.jl</a><a id="Benefits-of-using-Kezdi.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Benefits-of-using-Kezdi.jl" title="Permalink"></a></h2><h3 id="Free-and-open-source"><a class="docs-heading-anchor" href="#Free-and-open-source">Free and open-source</a><a id="Free-and-open-source-1"></a><a class="docs-heading-anchor-permalink" href="#Free-and-open-source" title="Permalink"></a></h3><h3 id="Speed"><a class="docs-heading-anchor" href="#Speed">Speed</a><a id="Speed-1"></a><a class="docs-heading-anchor-permalink" href="#Speed" title="Permalink"></a></h3><table><tr><th style="text-align: right">Command</th><th style="text-align: right">Stata</th><th style="text-align: right">Julia 1st run</th><th style="text-align: right">Julia 2nd run</th><th style="text-align: right">Speedup</th></tr><tr><td style="text-align: right"><code>@egen</code></td><td style="text-align: right">4.90s</td><td style="text-align: right">1.60s</td><td style="text-align: right">0.41s</td><td style="text-align: right">10x</td></tr><tr><td style="text-align: right"><code>@collapse</code></td><td style="text-align: right">0.92s</td><td style="text-align: right">0.18s</td><td style="text-align: right">0.13s</td><td style="text-align: right">8x</td></tr><tr><td style="text-align: right"><code>@tabulate</code></td><td style="text-align: right">2.14s</td><td style="text-align: right">0.46s</td><td style="text-align: right">0.10s</td><td style="text-align: right">20x</td></tr><tr><td style="text-align: right"><code>@summarize</code></td><td style="text-align: right">10.40s</td><td style="text-align: right">0.58s</td><td style="text-align: right">0.37s</td><td style="text-align: right">28x</td></tr><tr><td style="text-align: right"><code>@regress</code></td><td style="text-align: right">0.89s</td><td style="text-align: right">1.93s</td><td style="text-align: right">0.16s</td><td style="text-align: right">6x</td></tr></table><h3 id="Use-any-Julia-function"><a class="docs-heading-anchor" href="#Use-any-Julia-function">Use any Julia function</a><a id="Use-any-Julia-function-1"></a><a class="docs-heading-anchor-permalink" href="#Use-any-Julia-function" title="Permalink"></a></h3><pre><code class="language-julia hljs">@generate logHP = log(Horsepower)</code></pre><h3 id="Easily-extendable-with-user-defined-functions"><a class="docs-heading-anchor" href="#Easily-extendable-with-user-defined-functions">Easily extendable with user-defined functions</a><a id="Easily-extendable-with-user-defined-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Easily-extendable-with-user-defined-functions" title="Permalink"></a></h3><p>The function can operate on individual elements,</p><pre><code class="language-julia hljs">get_make(text) = split(text, &quot; &quot;)[1]
@generate Make = Main.get_make(Model)</code></pre><p>or on the entire column:</p><pre><code class="language-julia hljs">function geometric_mean(x::AbstractVector)
    n = length(x)
    return exp(sum(log.(x)) / n)
end
@collapse geom_NPG = Main.geometric_mean(MPG), by(Cylinders)</code></pre><div class="admonition is-success"><header class="admonition-header">Note: `Main.` prefix</header><div class="admonition-body"><p>If you define a function in your own code, you need to prefix the function name with <code>Main.</code> to use it in other commands. To make use of <a href="#Automatic-vectorization">Automatic vectorization</a>, make sure to give the function a vector argument type.</p></div></div><h2 id="Commands"><a class="docs-heading-anchor" href="#Commands">Commands</a><a id="Commands-1"></a><a class="docs-heading-anchor-permalink" href="#Commands" title="Permalink"></a></h2><h3 id="Setting-and-inspecting-the-global-DataFrame"><a class="docs-heading-anchor" href="#Setting-and-inspecting-the-global-DataFrame">Setting and inspecting the global DataFrame</a><a id="Setting-and-inspecting-the-global-DataFrame-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-and-inspecting-the-global-DataFrame" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.setdf" href="#Kezdi.setdf"><code>Kezdi.setdf</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">setdf(df::Union{AbstractDataFrame, Nothing})</code></pre><p>Set the global data frame.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/functions.jl#L10-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.getdf" href="#Kezdi.getdf"><code>Kezdi.getdf</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getdf() -&gt; AbstractDataFrame</code></pre><p>Return the global data frame.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/functions.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.@names" href="#Kezdi.@names"><code>Kezdi.@names</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@names</code></pre><p>Display the names of the variables in the data frame.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/macros.jl#L154-L158">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.@list" href="#Kezdi.@list"><code>Kezdi.@list</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@list</code></pre><p>Display the entire data frame.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/macros.jl#L127-L131">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.@head" href="#Kezdi.@head"><code>Kezdi.@head</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@head [n]</code></pre><p>Display the first <code>n</code> rows of the data frame. By default, <code>n</code> is 5.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/macros.jl#L136-L140">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.@tail" href="#Kezdi.@tail"><code>Kezdi.@tail</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@tail [n]</code></pre><p>Display the last <code>n</code> rows of the data frame. By default, <code>n</code> is 5.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/macros.jl#L145-L149">source</a></section></article><h3 id="Filtering-columns-and-rows"><a class="docs-heading-anchor" href="#Filtering-columns-and-rows">Filtering columns and rows</a><a id="Filtering-columns-and-rows-1"></a><a class="docs-heading-anchor-permalink" href="#Filtering-columns-and-rows" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.@keep" href="#Kezdi.@keep"><code>Kezdi.@keep</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@keep y1 y2 ... [@if condition]</code></pre><p>Keep only the variables <code>y1</code>, <code>y2</code>, etc. in <code>df</code>. If <code>condition</code> is provided, only the rows for which the condition is true are kept.  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/macros.jl#L8-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.@drop" href="#Kezdi.@drop"><code>Kezdi.@drop</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@drop y1 y2 ...</code></pre><p>or     @drop if condition]    </p><p>Drop the variables <code>y1</code>, <code>y2</code>, etc. from <code>df</code>. If <code>condition</code> is provided, the rows for which the condition is true are dropped.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/macros.jl#L17-L23">source</a></section></article><h3 id="Modifying-the-data"><a class="docs-heading-anchor" href="#Modifying-the-data">Modifying the data</a><a id="Modifying-the-data-1"></a><a class="docs-heading-anchor-permalink" href="#Modifying-the-data" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.@rename" href="#Kezdi.@rename"><code>Kezdi.@rename</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@rename oldname newname</code></pre><p>Rename the variable <code>oldname</code> to <code>newname</code> in the data frame.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/macros.jl#L163-L167">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.@generate" href="#Kezdi.@generate"><code>Kezdi.@generate</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@generate y = expr [@if condition]</code></pre><p>Create a new variable <code>y</code> in <code>df</code> by evaluating <code>expr</code>. If <code>condition</code> is provided, the operation is executed only on rows for which the condition is true. When the condition is false, the variable will be missing. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/macros.jl#L28-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.@replace" href="#Kezdi.@replace"><code>Kezdi.@replace</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@replace y = expr [@if condition]</code></pre><p>Replace the values of <code>y</code> in <code>df</code> with the result of evaluating <code>expr</code>. If <code>condition</code> is provided, the operation is executed only on rows for which the condition is true. When the condition is false, the variable will be left unchanged.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/macros.jl#L37-L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.@egen" href="#Kezdi.@egen"><code>Kezdi.@egen</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@egen y1 = expr1 y2 = expr2 ... [@if condition], [by(group1, group2, ...)]</code></pre><p>Generate new variables in <code>df</code> by evaluating expressions <code>expr1</code>, <code>expr2</code>, etc. If <code>condition</code> is provided, the operation is executed only on rows for which the condition is true. When the condition is false, the variables will be missing. If <code>by</code> is provided, the operation is executed by group.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/macros.jl#L46-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.@collapse" href="#Kezdi.@collapse"><code>Kezdi.@collapse</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@collapse y1 = expr1 y2 = expr2 ... [@if condition], [by(group1, group2, ...)]</code></pre><p>Collapse <code>df</code> by evaluating expressions <code>expr1</code>, <code>expr2</code>, etc. If <code>condition</code> is provided, the operation is executed only on rows for which the condition is true. If <code>by</code> is provided, the operation is executed by group.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/macros.jl#L55-L59">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.@sort" href="#Kezdi.@sort"><code>Kezdi.@sort</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@sort y1 y2 ...</code></pre><p>Sort the data frame by the variables <code>y1</code>, <code>y2</code>, etc. in ascending order.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/macros.jl#L100-L104">source</a></section></article><h3 id="Summarizing-and-analyzing-data"><a class="docs-heading-anchor" href="#Summarizing-and-analyzing-data">Summarizing and analyzing data</a><a id="Summarizing-and-analyzing-data-1"></a><a class="docs-heading-anchor-permalink" href="#Summarizing-and-analyzing-data" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.@count" href="#Kezdi.@count"><code>Kezdi.@count</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@count if condition]</code></pre><p>Count the number of rows for which the condition is true. If <code>condition</code> is not provided, the total number of rows is counted.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/macros.jl#L91-L95">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.@tabulate" href="#Kezdi.@tabulate"><code>Kezdi.@tabulate</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@tabulate y1 y2 ... [@if condition]</code></pre><p>Create a frequency table for the variables <code>y1</code>, <code>y2</code>, etc. in <code>df</code>. If <code>condition</code> is provided, the operation is executed only on rows for which the condition is true.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/macros.jl#L82-L86">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.@summarize" href="#Kezdi.@summarize"><code>Kezdi.@summarize</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@summarize y [@if condition]</code></pre><p>Summarize the variable <code>y</code> in <code>df</code>. If <code>condition</code> is provided, the operation is executed only on rows for which the condition is true.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/macros.jl#L64-L68">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.@regress" href="#Kezdi.@regress"><code>Kezdi.@regress</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@regress y x1 x2 ... [@if condition], [robust] [cluster(var1, var2, ...)]</code></pre><p>Estimate a regression model in <code>df</code> with dependent variable <code>y</code> and independent variables <code>x1</code>, <code>x2</code>, etc. If <code>condition</code> is provided, the operation is executed only on rows for which the condition is true. If <code>robust</code> is provided, robust standard errors are calculated. If <code>cluster</code> is provided, clustered standard errors are calculated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/macros.jl#L73-L77">source</a></section></article><h3 id="Use-on-another-DataFrame"><a class="docs-heading-anchor" href="#Use-on-another-DataFrame">Use on another DataFrame</a><a id="Use-on-another-DataFrame-1"></a><a class="docs-heading-anchor-permalink" href="#Use-on-another-DataFrame" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.With.@with" href="#Kezdi.With.@with"><code>Kezdi.With.@with</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@with df begin
    # do something with df
end</code></pre><p>The <code>@with</code> macro is a convenience macro that allows you to set the current data frame and perform operations on it in a single block. The first argument is the data frame to set as the current data frame, and the second argument is a block of code to execute. The data frame is set as the current data frame for the duration of the block, and then restored to its previous value after the block is executed.</p><p>The macro returns the value of the last expression in the block.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/With.jl#L113-L121">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.With.@with!" href="#Kezdi.With.@with!"><code>Kezdi.With.@with!</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@with! df begin
    # do something with df
end</code></pre><p>The <code>@with!</code> macro is a convenience macro that allows you to set the current data frame and perform operations on it in a single block. The first argument is the data frame to set as the current data frame, and the second argument is a block of code to execute. The data frame is set as the current data frame for the duration of the block, and then restored to its previous value after the block is executed.</p><p>The macro does not have a return value, it overwrites the data frame directly.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/With.jl#L127-L135">source</a></section></article><h2 id="Differences-to-standard-Julia-and-DataFrames-syntax"><a class="docs-heading-anchor" href="#Differences-to-standard-Julia-and-DataFrames-syntax">Differences to standard Julia and DataFrames syntax</a><a id="Differences-to-standard-Julia-and-DataFrames-syntax-1"></a><a class="docs-heading-anchor-permalink" href="#Differences-to-standard-Julia-and-DataFrames-syntax" title="Permalink"></a></h2><p>To maximize convenience for Stata users, Kezdi.jl has a number of differences to standard Julia and DataFrames syntax.</p><h3 id="Everything-is-a-macro"><a class="docs-heading-anchor" href="#Everything-is-a-macro">Everything is a macro</a><a id="Everything-is-a-macro-1"></a><a class="docs-heading-anchor-permalink" href="#Everything-is-a-macro" title="Permalink"></a></h3><p>While there are a few convenience functions, most Kezdi.jl commands are macros that begin with <code>@</code>.</p><pre><code class="language-julia hljs">@tabulate Gear</code></pre><h3 id="Comma-is-used-for-options"><a class="docs-heading-anchor" href="#Comma-is-used-for-options">Comma is used for options</a><a id="Comma-is-used-for-options-1"></a><a class="docs-heading-anchor-permalink" href="#Comma-is-used-for-options" title="Permalink"></a></h3><p>Due to this non-standard syntax, Kezdi.jl uses the comma to separate options.</p><pre><code class="language-julia hljs">@regress log(MPG) log(Horsepower), robust</code></pre><h3 id="Automatic-variable-name-substitution"><a class="docs-heading-anchor" href="#Automatic-variable-name-substitution">Automatic variable name substitution</a><a id="Automatic-variable-name-substitution-1"></a><a class="docs-heading-anchor-permalink" href="#Automatic-variable-name-substitution" title="Permalink"></a></h3><p>Column names of the data frame can be used directly in the commands without the need to prefix them with the data frame name or using a Symbol.</p><pre><code class="language-julia hljs">@generate logHP = log(Horsepower)</code></pre><h3 id="Automatic-vectorization"><a class="docs-heading-anchor" href="#Automatic-vectorization">Automatic vectorization</a><a id="Automatic-vectorization-1"></a><a class="docs-heading-anchor-permalink" href="#Automatic-vectorization" title="Permalink"></a></h3><p>All functions are automatically vectorized, so there is no need to use the <code>.</code> operator to broadcast functions over elements of a column. </p><pre><code class="language-julia hljs">@generate logHP = log(Horsepower)</code></pre><p>If you want to turn off automatic vectorization, use the convenience function <code>DNV()</code> (&quot;do not vectorize&quot;).</p><pre><code class="language-julia hljs">@generate logHP = DNV(log(Horsepower))</code></pre><p>The exception is when the function operates on Vectors, in which case Kezdi.jl understands you want to apply the function to the entire column.</p><pre><code class="language-julia hljs">@collapse mean_HP = mean(Horsepower), by(Cylinders)</code></pre><p>If you need to apply a function to individual elements of a column, you need to vectorize it with adding <code>.</code> after the function name:</p><pre><code class="language-julia hljs">@generate words = split(Model, &quot; &quot;)
@generate n_words = length.(words)</code></pre><div class="admonition is-success"><header class="admonition-header">Note: `length(words)` vs `length.(words)`</header><div class="admonition-body"><p>Here, <code>words</code> becomes a vector of vectors, where each element is a vector of words in the corresponding <code>Model</code> string. The function <code>legth.</code> will operate on each cell in <code>words</code>, counting the number of words in each <code>Model</code> string. By contrast, <code>length(words)</code> would return the number of elements in the <code>words</code> vector, which is the number of rows in the DataFrame.</p></div></div><h3 id="The-@if-condition"><a class="docs-heading-anchor" href="#The-@if-condition">The <code>@if</code> condition</a><a id="The-@if-condition-1"></a><a class="docs-heading-anchor-permalink" href="#The-@if-condition" title="Permalink"></a></h3><p>Almost every command can be followed by an <code>@if</code> condition that filters the data frame. The command will only be executed on the subset of rows for which the condition evaluates to <code>true</code>. The condition can use any combination of column names and functions.</p><pre><code class="language-julia hljs">@summarize MPG @if Horsepower &gt; median(Horsepower)</code></pre><div class="admonition is-success"><header class="admonition-header">Note: vector functions in `@if` conditions</header><div class="admonition-body"><p>Autovectorization rules also apply to <code>@if</code> conditions. If you use a vector function, it will be evaluated on the <em>entire</em> column, before subseting the data frame. By contrast, vector functions in <code>@generate</code> or <code>@collapse</code> commands are evaluated on the subset of rows that satisfy the condition.</p></div></div><pre><code class="language-julia hljs">@generate HP_p75 = median(Horsepower) @if Horsepower &gt; median(Horsepower)</code></pre><p>This code computes the median of horsepower values <em>above the median</em>, that is, the 75th percentile of the horsepower distribution. Of course, you can more easily do this calculation with <code>@summarize</code>:</p><pre><code class="language-julia hljs">s = @summarize Horsepower
s.p75</code></pre><h3 id="Handling-missing-values"><a class="docs-heading-anchor" href="#Handling-missing-values">Handling missing values</a><a id="Handling-missing-values-1"></a><a class="docs-heading-anchor-permalink" href="#Handling-missing-values" title="Permalink"></a></h3><p>Kezdi.jl ignores missing values when aggregating over entire columns. </p><pre><code class="language-julia hljs">@with DataFrame(A = [1, 2, missing, 4]) begin
    @collapse mean_A = mean(A)
end</code></pre><p>returns <code>mean_A = 2.33</code>.</p><h3 id="Row-count-variables"><a class="docs-heading-anchor" href="#Row-count-variables">Row-count variables</a><a id="Row-count-variables-1"></a><a class="docs-heading-anchor-permalink" href="#Row-count-variables" title="Permalink"></a></h3><p>The variable <code>_n</code> refers to the row number in the data frame, <code>_N</code> denotes the total number of rows. These can be used in <code>@if</code> conditions, as well.</p><pre><code class="language-julia hljs">@with DataFrame(A = [1, 2, 3, 4]) begin
    @keep @if _n &lt; 3
end</code></pre><h2 id="Differences-to-Stata-syntax"><a class="docs-heading-anchor" href="#Differences-to-Stata-syntax">Differences to Stata syntax</a><a id="Differences-to-Stata-syntax-1"></a><a class="docs-heading-anchor-permalink" href="#Differences-to-Stata-syntax" title="Permalink"></a></h2><h3 id="All-commands-begin-with-@"><a class="docs-heading-anchor" href="#All-commands-begin-with-@">All commands begin with <code>@</code></a><a id="All-commands-begin-with-@-1"></a><a class="docs-heading-anchor-permalink" href="#All-commands-begin-with-@" title="Permalink"></a></h3><h3 id="@collapse-has-same-syntax-as-@egen"><a class="docs-heading-anchor" href="#@collapse-has-same-syntax-as-@egen"><code>@collapse</code> has same syntax as <code>@egen</code></a><a id="@collapse-has-same-syntax-as-@egen-1"></a><a class="docs-heading-anchor-permalink" href="#@collapse-has-same-syntax-as-@egen" title="Permalink"></a></h3><h3 id="Different-function-names"><a class="docs-heading-anchor" href="#Different-function-names">Different function names</a><a id="Different-function-names-1"></a><a class="docs-heading-anchor-permalink" href="#Different-function-names" title="Permalink"></a></h3><ul><li>rowcount</li><li>ismissing</li></ul><h2 id="Convenience-functions"><a class="docs-heading-anchor" href="#Convenience-functions">Convenience functions</a><a id="Convenience-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Convenience-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.distinct" href="#Kezdi.distinct"><code>Kezdi.distinct</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">distinct(x::AbstractVector) = unique(x)</code></pre><p>Convenience function to get the distinct values of a vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/functions.jl#L18-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Kezdi.rowcount" href="#Kezdi.rowcount"><code>Kezdi.rowcount</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">rowcount(x::AbstractVector) = length(collect(skipmissing(x)))</code></pre><p>Count the number of non-missing values in a vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/codedthinking/Kezdi.jl/blob/a141f4f01017aaee2918adc3e9b7b1ca0b6c585f/src/functions.jl#L26-L30">source</a></section></article><h2 id="Acknowledgements"><a class="docs-heading-anchor" href="#Acknowledgements">Acknowledgements</a><a id="Acknowledgements-1"></a><a class="docs-heading-anchor-permalink" href="#Acknowledgements" title="Permalink"></a></h2><p>The package is built on top of <a href="https://dataframes.juliadata.org/stable/">DataFrames.jl</a>, <a href="https://github.com/nalimilan/FreqTables.jl">FreqTables.jl</a> and <a href="https://github.com/FixedEffects/FixedEffectModels.jl">FixedEffectModels.jl</a>. </p><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-stata"><a class="tag is-link" href="#citeref-stata">stata</a>Stata is a registered trademark of StataCorp LLC. Kezdi.jl is not affiliated with StataCorp LLC.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="reference/">Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Wednesday 3 July 2024 15:50">Wednesday 3 July 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
